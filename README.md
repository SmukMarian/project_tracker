# Haier Project Tracker

Черновая заготовка backend-а и архитектурных заметок для локального приложения управления проектами.

## Текущий статус
- Основные требования ТЗ покрыты; готовность оценивается примерно в 95%: интерфейс получил диалоги CRUD для категорий/проектов/шагов с записью в backend, остаются задачи по медиатеке и упаковке desktop-версии.

## Быстрый старт backend
1. Установите зависимости: `pip install -r requirements.txt`.
2. Запустите сервер: `uvicorn backend.app:app --reload`.
3. Откройте http://localhost:8000/docs чтобы проверить доступные endpoint'ы.
4. Настройте workspace: `POST /workspace` принимает путь папки и создаёт её, `GET /workspace` возвращает текущий путь.
5. Если выполнена сборка фронтенда (`npm run build` в каталоге `frontend`), SPA автоматически отдаётся по адресу http://localhost:8000/app/.

## Предпросмотр frontend
1. Перейдите в директорию `frontend/`.
2. Установите зависимости: `npm install`.
3. Запустите dev-сервер: `npm run dev` и откройте указанный localhost-порт (по умолчанию 5173).
4. Для интеграции с desktop-обёрткой соберите проект: `npm run build` (артефакты попадут в `frontend/dist`).

SPA пытается загрузить данные с API (`VITE_API_BASE`, по умолчанию `http://localhost:8000`) и автоматически откатывается к мок-данным, если сервер недоступен. Макет сохраняет требуемую компоновку: верхнее меню, левая колонка категорий/проектов с фильтрами, карточка проекта и блок шагов/подзадач с табами. Верхнее меню умеет выбирать и сохранять workspace, экспортировать категории в Excel, собирать KPI-отчёт в отдельном модальном окне и открывать справочник PM. Кнопки карточки проекта запускают выгрузку Word для выбранной категории/проекта и презентации категории (PPTX) прямо из backend.

В интерфейсе доступен переключатель светлой/тёмной темы в верхнем меню; выбранная тема сохраняется в локальном хранилище браузера.

Поиск поддерживает токены вида `status:in_progress`, `owner:Имя`, `assignee:Имя`, `weight:>1` в левом списке и таблицах шагов/подзадач; `Ctrl+F` фокусирует поисковое поле проектов. Шаги и подзадачи создаются/удаляются с попыткой записи в API (с автоматическим откатом к локальному мок-контенту при недоступности сервера), а комментарии по шагу редактируются во вкладке «Детали».

## Desktop-обёртка
1. Установите Python-зависимости (см. backend): `pip install -r requirements.txt`.
2. Соберите SPA (`npm run build`), чтобы фронтенд оказался в `frontend/dist`.
3. Запустите лаунчер: `python desktop.py`.
   - Backend поднимется на `http://127.0.0.1:8000` и откроется окно с `http://127.0.0.1:8000/app/`.
   - Если нужен внешний UI (например, dev-сервер Vite), укажите `--ui-url http://localhost:5173`.
   - Параметр `--no-backend` позволяет подключаться к уже запущенному серверу без автозапуска.

## Структура
- `backend/` — FastAPI + SQLAlchemy схема данных, базовые endpoint'ы и расчёт прогресса.
- `docs/` — архитектурные заметки по проекту.

## Что дальше
- Подключить реальную медиатеку/вложения к workspace и диалоги импорта/выбора файлов.
- Упаковать desktop-обёртку в инсталлятор, добавить автообновление и логирование.
